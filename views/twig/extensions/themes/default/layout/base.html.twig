{% extends "layout/base.html.twig" %}

{% block base_js %}
    {{ parent() }}
    {% if oViewConf.isPayPalCheckoutActive() %}
        {% set className = oViewConf.getTopActiveClassName() %}
        {% set sFileMTime = oViewConf.getModulePath('osc_paypal', 'js/paypal-frontend.min.js') %}
        <script src="{{ oViewConf.getModuleUrl('osc_paypal','js/paypal-frontend.min.js') }}"></script>
        <script src="{{ oViewConf.getPayPalJsSdkUrl() }}"
                {% if oViewConf.isVaultingEligibility() %}
                    data-user-id-token="{{ oViewConf.getUserIdForVaulting() }}"
                {% endif %}
                data-partner-attribution-id="{{ oViewConf.getPayPalPartnerAttributionIdForBanner() }}"
                data-client-token="{{ oViewConf.getDataClientToken() }}"
                onload="window.OxidPayPal.onSDKLoaded()"
        ></script>
        {% set sCountryRestriction = oViewConf.getCountryRestrictionForPayPalExpress() %}
        {% if sCountryRestriction %}
            <script>
                const countryRestriction = [{{ sCountryRestriction|raw }}];
            </script>
        {% endif %}
        {% if submitCart %}
            <script>
                document.getElementById('orderConfirmAgbBottom').submit();
            </script>
        {% endif %}
    {% endif %}
{% endblock %}

{% block base_style %}
    {{ parent() }}
    {% if oViewConf.isPayPalCheckoutActive() %}
    {{ style({ include: oViewConf.getModuleUrl('osc_paypal', 'css/paypal.min.css') }) }}
    {% endif %}

{% endblock %}
